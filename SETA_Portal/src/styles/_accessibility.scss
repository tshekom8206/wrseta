// =============================================
// WCAG 2.1 AA Accessibility Styles
// =============================================

// Skip Link for Screen Readers
.skip-link {
  position: absolute;
  left: -9999px;
  z-index: var(--z-tooltip);
  padding: 0.75rem 1.5rem;
  background-color: var(--seta-primary);
  color: #fff;
  text-decoration: none;
  font-weight: 600;
  border-radius: var(--border-radius);

  &:focus {
    left: 1rem;
    top: 1rem;
    outline: 3px solid var(--seta-accent);
    outline-offset: 2px;
  }
}

// Focus Indicators (WCAG 2.4.7)
*:focus {
  outline: 2px solid var(--seta-primary);
  outline-offset: 2px;
}

*:focus:not(:focus-visible) {
  outline: none;
}

*:focus-visible {
  outline: 3px solid var(--seta-primary);
  outline-offset: 2px;
}

// Enhanced focus for interactive elements
button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
[tabindex]:focus-visible {
  outline: 3px solid var(--seta-primary);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.1);
}

// Minimum Touch Target Size (WCAG 2.5.5 - 44x44px)
button,
a.btn,
.btn,
input[type="checkbox"],
input[type="radio"],
select,
.nav-link,
.dropdown-item {
  min-height: 44px;
  min-width: 44px;
}

input[type="checkbox"],
input[type="radio"] {
  width: 20px;
  height: 20px;
  margin: 12px;
}

// Text Contrast (WCAG 1.4.3 - 4.5:1 minimum)
.text-muted {
  color: #595959 !important; // Ensures 4.5:1 contrast on white
}

// Links must be distinguishable
a {
  text-decoration: underline;

  &:hover {
    text-decoration: none;
  }
}

// Buttons don't need underlines
.btn,
.nav-link {
  text-decoration: none !important;
}

// Screen Reader Only Content
.sr-only,
.visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

.sr-only-focusable:focus,
.visually-hidden-focusable:focus {
  position: static !important;
  width: auto !important;
  height: auto !important;
  overflow: visible !important;
  clip: auto !important;
  white-space: normal !important;
}

// Reduced Motion (WCAG 2.3.3)
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

// High Contrast Mode Support
@media (prefers-contrast: high) {
  :root {
    --seta-primary: #000080;
    --seta-text-primary: #000000;
    --seta-text-secondary: #333333;
    --seta-bg-primary: #ffffff;
    --seta-bg-secondary: #f0f0f0;
  }

  button,
  .btn {
    border-width: 2px;
  }

  input,
  select,
  textarea {
    border-width: 2px;
    border-color: #000;
  }
}

// Error States - Clear Visual Indication
.is-invalid,
.form-control.is-invalid,
.form-select.is-invalid {
  border-color: var(--seta-danger);
  border-width: 2px;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right calc(0.375em + 0.1875rem) center;
  background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
}

.invalid-feedback {
  color: var(--seta-danger);
  font-weight: 500;
  display: block;
  margin-top: 0.25rem;
}

// Status Colors with Pattern Support (not relying on color alone)
.status-green {
  background-color: var(--status-green);
  position: relative;

  &::before {
    content: '✓';
    margin-right: 0.5rem;
  }
}

.status-amber {
  background-color: var(--status-amber);
  color: #000;
  position: relative;

  &::before {
    content: '⚠';
    margin-right: 0.5rem;
  }
}

.status-red {
  background-color: var(--status-red);
  position: relative;

  &::before {
    content: '✕';
    margin-right: 0.5rem;
  }
}

// Form Labels - Always visible
label {
  font-weight: 500;
  margin-bottom: 0.25rem;
}

// Required Field Indicator
.required::after {
  content: ' *';
  color: var(--seta-danger);
}

// Loading States - Accessible
.loading {
  position: relative;

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(255, 255, 255, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
  }
}

// Live Regions for Screen Readers
[aria-live="polite"],
[aria-live="assertive"] {
  position: absolute;
  left: -9999px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

// Visible live regions
.alert[aria-live],
.toast[aria-live] {
  position: relative;
  left: auto;
  width: auto;
  height: auto;
  overflow: visible;
}

// Table Accessibility
table {
  caption-side: top;

  caption {
    font-weight: 600;
    padding: 0.75rem;
    text-align: left;
    color: var(--seta-text-primary);
  }
}

th {
  font-weight: 600;
  text-align: left;
}

// Modal Focus Trap Enhancement
.modal.show {
  [tabindex="-1"]:focus {
    outline: none;
  }
}

// Tooltip/Popover Accessibility
[data-bs-toggle="tooltip"],
[data-bs-toggle="popover"] {
  cursor: help;
}
